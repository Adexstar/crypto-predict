<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Password Reset - Investment Platform</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { width: 100%; height: 100%; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 100%); color: #fff; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        
        .container { max-width: 500px; width: 100%; padding: 20px; }
        
        .logo { text-align: center; margin-bottom: 40px; }
        .logo h1 { font-size: 2rem; color: #f0ad4e; }
        .logo p { color: #aaa; font-size: 0.95rem; }
        
        .form-card { background: rgba(26, 26, 46, 0.9); border: 1px solid #3861fb; padding: 40px; border-radius: 8px; }
        
        .form-header { margin-bottom: 30px; }
        .form-header h2 { color: #f0ad4e; margin-bottom: 10px; font-size: 1.5rem; }
        .form-header p { color: #aaa; font-size: 0.95rem; }
        
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; color: #aaa; font-size: 0.9rem; margin-bottom: 8px; font-weight: 500; }
        .form-group input { width: 100%; padding: 12px; background: rgba(15, 15, 35, 0.8); border: 1px solid #3861fb; color: #fff; border-radius: 5px; font-size: 1rem; transition: border-color 0.3s; }
        .form-group input:focus { outline: none; border-color: #f0ad4e; }
        .form-group input::placeholder { color: #666; }
        
        .btn { width: 100%; padding: 12px; border: none; border-radius: 5px; cursor: pointer; font-size: 1rem; font-weight: 500; transition: all 0.3s; }
        .btn-primary { background: #3861fb; color: #fff; }
        .btn-primary:hover { background: #2a48cc; }
        .btn-secondary { background: transparent; color: #f0ad4e; border: 1px solid #f0ad4e; margin-top: 10px; }
        .btn-secondary:hover { background: rgba(240, 173, 78, 0.1); }
        
        .alert { padding: 15px; border-radius: 5px; margin-bottom: 20px; display: none; }
        .alert-success { background: rgba(5, 178, 108, 0.2); border: 1px solid #05b26c; color: #05b26c; }
        .alert-error { background: rgba(246, 70, 93, 0.2); border: 1px solid #f6465d; color: #f6465d; }
        .alert-info { background: rgba(56, 97, 251, 0.2); border: 1px solid #3861fb; color: #3861fb; }
        .alert.show { display: block; }
        
        .divider { text-align: center; margin: 20px 0; color: #555; }
        
        .links { text-align: center; margin-top: 20px; }
        .links a { color: #f0ad4e; text-decoration: none; font-size: 0.95rem; transition: color 0.3s; }
        .links a:hover { color: #fff; }
        
        .success-message { display: none; text-align: center; }
        .success-message h3 { color: #05b26c; margin-bottom: 10px; }
        .success-message p { color: #aaa; margin-bottom: 20px; }
        
        .step-indicator { display: flex; gap: 10px; margin-bottom: 20px; justify-content: center; }
        .step { width: 40px; height: 40px; border-radius: 50%; background: rgba(56, 97, 251, 0.3); color: #aaa; display: flex; align-items: center; justify-content: center; font-weight: 600; transition: all 0.3s; }
        .step.active { background: #3861fb; color: #fff; }
        .step.completed { background: #05b26c; color: #fff; }
        
        @media (max-width: 768px) {
            .form-card { padding: 30px; }
            .form-header h2 { font-size: 1.3rem; }
            .container { padding: 15px; }
        }
        
        @media (max-width: 480px) {
            .form-card { padding: 20px; }
            .form-header h2 { font-size: 1.1rem; }
            .logo h1 { font-size: 1.5rem; }
            .container { padding: 10px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>Investment Platform</h1>
            <p>Password Recovery</p>
        </div>
        
        <div class="form-card">
            <div id="alertBox" class="alert"></div>
            
            <div id="stepIndicator" class="step-indicator">
                <div class="step active" id="step1">1</div>
                <div class="step" id="step2">2</div>
                <div class="step" id="step3">3</div>
            </div>
            
            <!-- Step 1: Email Verification -->
            <div id="step1Content">
                <div class="form-header">
                    <h2>Forgot Password?</h2>
                    <p>Enter your email address to receive a password reset link</p>
                </div>
                
                <form id="emailForm" onsubmit="handleEmailSubmit(event)">
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" name="email" placeholder="your@email.com" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Send Reset Link</button>
                </form>
                
                <div class="divider">or</div>
                
                <div class="links">
                    <a href="login.html">Back to Login</a>
                </div>
            </div>
            
            <!-- Step 2: Verification Code -->
            <div id="step2Content" style="display: none;">
                <div class="form-header">
                    <h2>Verify Email</h2>
                    <p>We've sent a verification code to your email</p>
                </div>
                
                <form id="codeForm" onsubmit="handleCodeSubmit(event)">
                    <div class="form-group">
                        <label for="verificationCode">Verification Code</label>
                        <input type="text" id="verificationCode" name="verificationCode" placeholder="Enter 6-digit code" maxlength="6" pattern="[0-9]{6}" required>
                        <small style="color: #aaa; display: block; margin-top: 5px;">Check your email for the code</small>
                    </div>
                    <button type="submit" class="btn btn-primary">Verify Code</button>
                    <button type="button" class="btn btn-secondary" onclick="goBackToEmail()">Back</button>
                </form>
            </div>
            
            <!-- Step 3: Reset Password -->
            <div id="step3Content" style="display: none;">
                <div class="form-header">
                    <h2>Reset Password</h2>
                    <p>Create a new password for your account</p>
                </div>
                
                <form id="resetForm" onsubmit="handlePasswordReset(event)">
                    <div class="form-group">
                        <label for="newPassword">New Password</label>
                        <input type="password" id="newPassword" name="newPassword" placeholder="At least 8 characters" minlength="8" required>
                    </div>
                    <div class="form-group">
                        <label for="confirmPassword">Confirm Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" minlength="8" required>
                    </div>
                    <button type="submit" class="btn btn-primary">Reset Password</button>
                </form>
            </div>
            
            <!-- Success Message -->
            <div id="successContent" style="display: none;" class="success-message">
                <h3>Password Reset Successfully!</h3>
                <p>Your password has been changed. You can now log in with your new password.</p>
                <a href="login.html" class="btn btn-primary" style="text-decoration: none;">Back to Login</a>
            </div>
        </div>
    </div>
    
    <script type="module">
        // Simulate password reset flow (in real app, would use backend)
        let resetState = {
            email: '',
            verificationCode: '',
            currentStep: 1
        };
        
        // Generate random verification code (for demo)
        function generateVerificationCode() {
            return Math.floor(Math.random() * 1000000).toString().padStart(6, '0');
        }
        
        window.handleEmailSubmit = function(event) {
            event.preventDefault();
            const email = document.getElementById('email').value.trim();
            
            if (!email) {
                showAlert('Please enter a valid email address', 'error');
                return;
            }
            
            // Simulate sending email
            resetState.email = email;
            resetState.verificationCode = generateVerificationCode();
            
            console.log('Verification code:', resetState.verificationCode);
            showAlert(`Reset link sent to ${email}. Use code: ${resetState.verificationCode}`, 'info');
            
            // Move to step 2
            setTimeout(() => {
                goToStep(2);
            }, 2000);
        };
        
        window.handleCodeSubmit = function(event) {
            event.preventDefault();
            const code = document.getElementById('verificationCode').value;
            
            if (code === resetState.verificationCode) {
                showAlert('Verification successful!', 'success');
                setTimeout(() => {
                    goToStep(3);
                }, 1500);
            } else {
                showAlert('Invalid verification code. Please try again.', 'error');
            }
        };
        
        window.handlePasswordReset = function(event) {
            event.preventDefault();
            const newPassword = document.getElementById('newPassword').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (newPassword !== confirmPassword) {
                showAlert('Passwords do not match', 'error');
                return;
            }
            
            if (newPassword.length < 8) {
                showAlert('Password must be at least 8 characters', 'error');
                return;
            }
            
            // Simulate password reset
            showAlert('Password reset successful! Redirecting to login...', 'success');
            
            setTimeout(() => {
                // Show success message
                document.getElementById('step1Content').style.display = 'none';
                document.getElementById('step2Content').style.display = 'none';
                document.getElementById('step3Content').style.display = 'none';
                document.getElementById('successContent').style.display = 'block';
                
                // Mark all steps as completed
                document.getElementById('step1').classList.add('completed');
                document.getElementById('step2').classList.add('completed');
                document.getElementById('step3').classList.add('completed');
                
                // Redirect to login after 3 seconds
                setTimeout(() => {
                    window.location.href = 'login.html';
                }, 3000);
            }, 1500);
        };
        
        window.goToStep = function(step) {
            resetState.currentStep = step;
            
            // Hide all steps
            document.getElementById('step1Content').style.display = 'none';
            document.getElementById('step2Content').style.display = 'none';
            document.getElementById('step3Content').style.display = 'none';
            
            // Show current step
            if (step === 1) document.getElementById('step1Content').style.display = 'block';
            if (step === 2) document.getElementById('step2Content').style.display = 'block';
            if (step === 3) document.getElementById('step3Content').style.display = 'block';
            
            // Update step indicators
            document.getElementById('step1').classList.toggle('active', step === 1);
            document.getElementById('step2').classList.toggle('active', step === 2);
            document.getElementById('step3').classList.toggle('active', step === 3);
            
            document.getElementById('step1').classList.toggle('completed', step > 1);
            document.getElementById('step2').classList.toggle('completed', step > 2);
        };
        
        window.goBackToEmail = function() {
            goToStep(1);
            document.getElementById('emailForm').reset();
            document.getElementById('codeForm').reset();
        };
        
        function showAlert(message, type) {
            const alertBox = document.getElementById('alertBox');
            alertBox.textContent = message;
            alertBox.className = 'alert alert-' + type + ' show';
            setTimeout(() => alertBox.classList.remove('show'), 5000);
        }
    </script>
</body>
</html>
